#########################################
### Effect of clearing broken votings ###
#########################################
effect_test = {
	news_event = EU_news.24
}
EU_clear_voting = {
	every_country = {
		limit = { has_country_flag = EU_potential }

		clear_variable = global.var_EUvoteYes
		clear_variable = global.var_EUvoteNo
		clear_variable = global.var_EUvoteTotal
		clear_variable = global.var_EUpopYes
		clear_variable = global.var_EUpopNo

		clr_country_flag = EU_voted
		clr_country_flag = gov_strong_resist
		clr_country_flag = gov_resist
		clr_country_flag = gov_support
		clr_country_flag = gov_strong_support
		clr_country_flag = EU_voted_yes
		clr_country_flag = EU_voted_no

		clr_global_flag = EU_unanimity_voting
		clr_global_flag = EU_qualified_majority_voting
		clr_global_flag = EU_majority_voting

		clr_global_flag = EU_unanimity_voting_YES
		clr_global_flag = EU_qualified_majority_voting_YES
		clr_global_flag = EU_majority_voting_YES
		clr_global_flag = EU_unanimity_voting_NO
		clr_global_flag = EU_qualified_majority_voting_NO
		clr_global_flag = EU_majority_voting_NO

		clr_global_flag = focus_EU001_voted
		clr_global_flag = focus_EU001_QMV_voted
		clr_global_flag = focus_EU001_maj_voted
		clr_global_flag = focus_EU002_voted
		clr_global_flag = focus_EU002_QMV_voted
		clr_global_flag = focus_EU002_maj_voted
		clr_global_flag = focus_EU100_voted
		clr_global_flag = focus_EU100_QMV_voted
		clr_global_flag = focus_EU100_maj_voted
		clr_global_flag = focus_EU101_voted
		clr_global_flag = focus_EU101_QMV_voted
		clr_global_flag = focus_EU101_maj_voted
		clr_global_flag = focus_EU102_voted
		clr_global_flag = focus_EU102_QMV_voted
		clr_global_flag = focus_EU102_maj_voted
		clr_global_flag = focus_EU103_voted
		clr_global_flag = focus_EU103_QMV_voted
		clr_global_flag = focus_EU103_maj_voted
		clr_global_flag = focus_EU104_voted
		clr_global_flag = focus_EU104_QMV_voted
		clr_global_flag = focus_EU104_maj_voted
		clr_global_flag = focus_EU105_voted
		clr_global_flag = focus_EU105_QMV_voted
		clr_global_flag = focus_EU105_maj_voted
		clr_global_flag = focus_EU200_voted
		clr_global_flag = focus_EU200_QMV_voted
		clr_global_flag = focus_EU200_maj_voted
		clr_global_flag = focus_EU201_voted
		clr_global_flag = focus_EU201_QMV_voted
		clr_global_flag = focus_EU201_maj_voted
		clr_global_flag = focus_EU202_voted
		clr_global_flag = focus_EU202_QMV_voted
		clr_global_flag = focus_EU202_maj_voted
		clr_global_flag = focus_EU203_voted
		clr_global_flag = focus_EU203_QMV_voted
		clr_global_flag = focus_EU203_maj_voted
		clr_global_flag = focus_EU204_voted
		clr_global_flag = focus_EU204_QMV_voted
		clr_global_flag = focus_EU204_maj_voted
		clr_global_flag = focus_EU205_voted
		clr_global_flag = focus_EU205_QMV_voted
		clr_global_flag = focus_EU205_maj_voted
		clr_global_flag = focus_EU206_voted
		clr_global_flag = focus_EU206_QMV_voted
		clr_global_flag = focus_EU206_maj_voted
		clr_global_flag = focus_EU207_voted
		clr_global_flag = focus_EU207_QMV_voted
		clr_global_flag = focus_EU207_maj_voted
		clr_global_flag = focus_EU208_voted
		clr_global_flag = focus_EU208_QMV_voted
		clr_global_flag = focus_EU208_maj_voted
		clr_global_flag = focus_EU300_voted
		clr_global_flag = focus_EU300_QMV_voted
		clr_global_flag = focus_EU300_maj_voted
		clr_global_flag = focus_EU301_voted
		clr_global_flag = focus_EU301_QMV_voted
		clr_global_flag = focus_EU301_maj_voted
		clr_global_flag = focus_EU302_voted
		clr_global_flag = focus_EU302_QMV_voted
		clr_global_flag = focus_EU302_maj_voted
		clr_global_flag = focus_EU303_voted
		clr_global_flag = focus_EU303_QMV_voted
		clr_global_flag = focus_EU303_maj_voted
		clr_global_flag = focus_EU304_voted
		clr_global_flag = focus_EU304_QMV_voted
		clr_global_flag = focus_EU304_maj_voted
		clr_global_flag = focus_EU305_voted
		clr_global_flag = focus_EU305_QMV_voted
		clr_global_flag = focus_EU305_maj_voted
		clr_global_flag = focus_EU306_voted
		clr_global_flag = focus_EU306_QMV_voted
		clr_global_flag = focus_EU306_maj_voted
		clr_global_flag = focus_EU307_voted
		clr_global_flag = focus_EU307_QMV_voted
		clr_global_flag = focus_EU307_maj_voted
		clr_global_flag = focus_EU308_voted
		clr_global_flag = focus_EU308_QMV_voted
		clr_global_flag = focus_EU308_maj_voted
		clr_global_flag = focus_EU400_voted
		clr_global_flag = focus_EU400_QMV_voted
		clr_global_flag = focus_EU400_maj_voted
		clr_global_flag = focus_EU401_voted
		clr_global_flag = focus_EU401_QMV_voted
		clr_global_flag = focus_EU401_maj_voted
		clr_global_flag = focus_EU402_voted
		clr_global_flag = focus_EU402_QMV_voted
		clr_global_flag = focus_EU402_maj_voted
		clr_global_flag = focus_EU403_voted
		clr_global_flag = focus_EU403_QMV_voted
		clr_global_flag = focus_EU403_maj_voted
		clr_global_flag = focus_EU404_voted
		clr_global_flag = focus_EU404_QMV_voted
		clr_global_flag = focus_EU404_maj_voted
		clr_global_flag = focus_EU405_voted
		clr_global_flag = focus_EU405_QMV_voted
		clr_global_flag = focus_EU405_maj_voted
		clr_global_flag = focus_EU406_voted
		clr_global_flag = focus_EU406_QMV_voted
		clr_global_flag = focus_EU406_maj_voted
		clr_global_flag = focus_EU407_voted
		clr_global_flag = focus_EU407_QMV_voted
		clr_global_flag = focus_EU407_maj_voted
		clr_global_flag = focus_EU408_voted
		clr_global_flag = focus_EU408_QMV_voted
		clr_global_flag = focus_EU408_maj_voted
		clr_global_flag = focus_EU500_voted
		clr_global_flag = focus_EU500_QMV_voted
		clr_global_flag = focus_EU500_maj_voted
		clr_global_flag = focus_EU600_voted
		clr_global_flag = focus_EU600_QMV_voted
		clr_global_flag = focus_EU600_maj_voted
		clr_global_flag = focus_EU601_voted
		clr_global_flag = focus_EU601_QMV_voted
		clr_global_flag = focus_EU601_maj_voted
		clr_global_flag = focus_EU602_voted
		clr_global_flag = focus_EU602_QMV_voted
		clr_global_flag = focus_EU602_maj_voted
		clr_global_flag = focus_EU603_voted
		clr_global_flag = focus_EU603_QMV_voted
		clr_global_flag = focus_EU603_maj_voted
		clr_global_flag = focus_EU700_voted
		clr_global_flag = focus_EU700_QMV_voted
		clr_global_flag = focus_EU700_maj_voted
		clr_global_flag = focus_EU701_voted
		clr_global_flag = focus_EU701_QMV_voted
		clr_global_flag = focus_EU701_maj_voted
		clr_global_flag = focus_EU702_voted
		clr_global_flag = focus_EU702_QMV_voted
		clr_global_flag = focus_EU702_maj_voted
		clr_global_flag = focus_EU703_voted
		clr_global_flag = focus_EU703_QMV_voted
		clr_global_flag = focus_EU703_maj_voted
		clr_global_flag = focus_EU110_voted
		clr_global_flag = focus_EU110_QMV_voted
		clr_global_flag = focus_EU110_maj_voted
		clr_global_flag = focus_EU111_voted
		clr_global_flag = focus_EU111_QMV_voted
		clr_global_flag = focus_EU111_maj_voted
		clr_global_flag = focus_EU112_voted
		clr_global_flag = focus_EU112_QMV_voted
		clr_global_flag = focus_EU112_maj_voted
		clr_global_flag = focus_EU113_voted
		clr_global_flag = focus_EU113_QMV_voted
		clr_global_flag = focus_EU113_maj_voted
		clr_global_flag = focus_EU604_voted
		clr_global_flag = focus_EU604_QMV_voted
		clr_global_flag = focus_EU604_maj_voted
		clr_global_flag = focus_EU605_voted
		clr_global_flag = focus_EU605_QMV_voted
		clr_global_flag = focus_EU605_maj_voted
		clr_global_flag = focus_EU606_voted
		clr_global_flag = focus_EU606_QMV_voted
		clr_global_flag = focus_EU606_maj_voted
		clr_global_flag = focus_EU607_voted
		clr_global_flag = focus_EU607_QMV_voted
		clr_global_flag = focus_EU607_maj_voted
		clr_global_flag = focus_EU608_voted
		clr_global_flag = focus_EU608_QMV_voted
		clr_global_flag = focus_EU608_maj_voted
		clr_global_flag = focus_EU609_voted
		clr_global_flag = focus_EU609_QMV_voted
		clr_global_flag = focus_EU609_maj_voted
		clr_global_flag = focus_EU610_voted
		clr_global_flag = focus_EU610_QMV_voted
		clr_global_flag = focus_EU610_maj_voted
		clr_global_flag = focus_EU611_voted
		clr_global_flag = focus_EU611_QMV_voted
		clr_global_flag = focus_EU611_maj_voted
		###result flags
		clr_global_flag = focus_EU001_result
		clr_global_flag = focus_EU001_QMV_result
		clr_global_flag = focus_EU001_maj_result
		clr_global_flag = focus_EU002_result
		clr_global_flag = focus_EU002_QMV_result
		clr_global_flag = focus_EU002_maj_result
		clr_global_flag = focus_EU100_result
		clr_global_flag = focus_EU100_QMV_result
		clr_global_flag = focus_EU100_maj_result
		clr_global_flag = focus_EU101_result
		clr_global_flag = focus_EU101_QMV_result
		clr_global_flag = focus_EU101_maj_result
		clr_global_flag = focus_EU102_result
		clr_global_flag = focus_EU102_QMV_result
		clr_global_flag = focus_EU102_maj_result
		clr_global_flag = focus_EU103_result
		clr_global_flag = focus_EU103_QMV_result
		clr_global_flag = focus_EU103_maj_result
		clr_global_flag = focus_EU104_result
		clr_global_flag = focus_EU104_QMV_result
		clr_global_flag = focus_EU104_maj_result
		clr_global_flag = focus_EU105_result
		clr_global_flag = focus_EU105_QMV_result
		clr_global_flag = focus_EU105_maj_result
		clr_global_flag = focus_EU200_result
		clr_global_flag = focus_EU200_QMV_result
		clr_global_flag = focus_EU200_maj_result
		clr_global_flag = focus_EU201_result
		clr_global_flag = focus_EU201_QMV_result
		clr_global_flag = focus_EU201_maj_result
		clr_global_flag = focus_EU202_result
		clr_global_flag = focus_EU202_QMV_result
		clr_global_flag = focus_EU202_maj_result
		clr_global_flag = focus_EU203_result
		clr_global_flag = focus_EU203_QMV_result
		clr_global_flag = focus_EU203_maj_result
		clr_global_flag = focus_EU204_result
		clr_global_flag = focus_EU204_QMV_result
		clr_global_flag = focus_EU204_maj_result
		clr_global_flag = focus_EU205_result
		clr_global_flag = focus_EU205_QMV_result
		clr_global_flag = focus_EU205_maj_result
		clr_global_flag = focus_EU206_result
		clr_global_flag = focus_EU206_QMV_result
		clr_global_flag = focus_EU206_maj_result
		clr_global_flag = focus_EU207_result
		clr_global_flag = focus_EU207_QMV_result
		clr_global_flag = focus_EU207_maj_result
		clr_global_flag = focus_EU208_result
		clr_global_flag = focus_EU208_QMV_result
		clr_global_flag = focus_EU208_maj_result
		clr_global_flag = focus_EU300_result
		clr_global_flag = focus_EU300_QMV_result
		clr_global_flag = focus_EU300_maj_result
		clr_global_flag = focus_EU301_result
		clr_global_flag = focus_EU301_QMV_result
		clr_global_flag = focus_EU301_maj_result
		clr_global_flag = focus_EU302_result
		clr_global_flag = focus_EU302_QMV_result
		clr_global_flag = focus_EU302_maj_result
		clr_global_flag = focus_EU303_result
		clr_global_flag = focus_EU303_QMV_result
		clr_global_flag = focus_EU303_maj_result
		clr_global_flag = focus_EU304_result
		clr_global_flag = focus_EU304_QMV_result
		clr_global_flag = focus_EU304_maj_result
		clr_global_flag = focus_EU305_result
		clr_global_flag = focus_EU305_QMV_result
		clr_global_flag = focus_EU305_maj_result
		clr_global_flag = focus_EU306_result
		clr_global_flag = focus_EU306_QMV_result
		clr_global_flag = focus_EU306_maj_result
		clr_global_flag = focus_EU307_result
		clr_global_flag = focus_EU307_QMV_result
		clr_global_flag = focus_EU307_maj_result
		clr_global_flag = focus_EU308_result
		clr_global_flag = focus_EU308_QMV_result
		clr_global_flag = focus_EU308_maj_result
		clr_global_flag = focus_EU400_result
		clr_global_flag = focus_EU400_QMV_result
		clr_global_flag = focus_EU400_maj_result
		clr_global_flag = focus_EU401_result
		clr_global_flag = focus_EU401_QMV_result
		clr_global_flag = focus_EU401_maj_result
		clr_global_flag = focus_EU402_result
		clr_global_flag = focus_EU402_QMV_result
		clr_global_flag = focus_EU402_maj_result
		clr_global_flag = focus_EU403_result
		clr_global_flag = focus_EU403_QMV_result
		clr_global_flag = focus_EU403_maj_result
		clr_global_flag = focus_EU404_result
		clr_global_flag = focus_EU404_QMV_result
		clr_global_flag = focus_EU404_maj_result
		clr_global_flag = focus_EU405_result
		clr_global_flag = focus_EU405_QMV_result
		clr_global_flag = focus_EU405_maj_result
		clr_global_flag = focus_EU406_result
		clr_global_flag = focus_EU406_QMV_result
		clr_global_flag = focus_EU406_maj_result
		clr_global_flag = focus_EU407_result
		clr_global_flag = focus_EU407_QMV_result
		clr_global_flag = focus_EU407_maj_result
		clr_global_flag = focus_EU408_result
		clr_global_flag = focus_EU408_QMV_result
		clr_global_flag = focus_EU408_maj_result
		clr_global_flag = focus_EU500_result
		clr_global_flag = focus_EU500_QMV_result
		clr_global_flag = focus_EU500_maj_result
		clr_global_flag = focus_EU600_result
		clr_global_flag = focus_EU600_QMV_result
		clr_global_flag = focus_EU600_maj_result
		clr_global_flag = focus_EU601_result
		clr_global_flag = focus_EU601_QMV_result
		clr_global_flag = focus_EU601_maj_result
		clr_global_flag = focus_EU602_result
		clr_global_flag = focus_EU602_QMV_result
		clr_global_flag = focus_EU602_maj_result
		clr_global_flag = focus_EU603_result
		clr_global_flag = focus_EU603_QMV_result
		clr_global_flag = focus_EU603_maj_result
		clr_global_flag = focus_EU700_result
		clr_global_flag = focus_EU700_QMV_result
		clr_global_flag = focus_EU700_maj_result
		clr_global_flag = focus_EU701_result
		clr_global_flag = focus_EU701_QMV_result
		clr_global_flag = focus_EU701_maj_result
		clr_global_flag = focus_EU702_result
		clr_global_flag = focus_EU702_QMV_result
		clr_global_flag = focus_EU702_maj_result
		clr_global_flag = focus_EU703_result
		clr_global_flag = focus_EU703_QMV_result
		clr_global_flag = focus_EU703_maj_result
		clr_global_flag = focus_EU110_result
		clr_global_flag = focus_EU110_QMV_result
		clr_global_flag = focus_EU110_maj_result
		clr_global_flag = focus_EU111_result
		clr_global_flag = focus_EU111_QMV_result
		clr_global_flag = focus_EU111_maj_result
		clr_global_flag = focus_EU112_result
		clr_global_flag = focus_EU112_QMV_result
		clr_global_flag = focus_EU112_maj_result
		clr_global_flag = focus_EU113_result
		clr_global_flag = focus_EU113_QMV_result
		clr_global_flag = focus_EU113_maj_result
		clr_global_flag = focus_EU604_result
		clr_global_flag = focus_EU604_QMV_result
		clr_global_flag = focus_EU604_maj_result
		clr_global_flag = focus_EU605_result
		clr_global_flag = focus_EU605_QMV_result
		clr_global_flag = focus_EU605_maj_result
		clr_global_flag = focus_EU606_result
		clr_global_flag = focus_EU606_QMV_result
		clr_global_flag = focus_EU606_maj_result
		clr_global_flag = focus_EU607_result
		clr_global_flag = focus_EU607_QMV_result
		clr_global_flag = focus_EU607_maj_result
		clr_global_flag = focus_EU608_result
		clr_global_flag = focus_EU608_QMV_result
		clr_global_flag = focus_EU608_maj_result
		clr_global_flag = focus_EU609_result
		clr_global_flag = focus_EU609_QMV_result
		clr_global_flag = focus_EU609_maj_result
		clr_global_flag = focus_EU610_result
		clr_global_flag = focus_EU610_QMV_result
		clr_global_flag = focus_EU610_maj_result
		clr_global_flag = focus_EU611_result
		clr_global_flag = focus_EU611_QMV_result
		clr_global_flag = focus_EU611_maj_result
	}
}

##############################################
##############################################
### EU scripted effects to use for modding ###
##############################################
##############################################

EU_update_vars = {
	custom_effect_tooltip = "Update Ratio of Total EU, Euroscepticism, Europeanism"
	hidden_effect = {
		# log = "[GetDateText]: [FROM.GetTag]: 99_EU_scripted_effects EU_update_vars"

		# EU population vars update
		# Sets Global EU Population and Country Population
		set_variable = { var = global.var_EUpopTotal value = 0 }
		for_each_scope_loop = {
			array = global.EU_member
			set_temp_variable = { converted_manpower = max_manpower_k }
			divide_temp_variable = { converted_manpower = 100 }
			set_variable = { EU_member_state_population = converted_manpower }
			divide_variable = { EU_member_state_population = 10 } #Converts to millions for use in display
			add_to_variable = { global.var_EUpopTotal = converted_manpower }
		}
		set_variable = { var = global.var_EUpopTotalDisplay value = global.var_EUpopTotal }
		divide_variable = { global.var_EUpopTotalDisplay = 10 }

		# Sets the total number of EU Member States
		set_variable = { var = global.var_EUmemberstatesTotal value = 0 }
		for_each_scope_loop = {
			array = global.EU_member
			add_to_variable = { global.var_EUmemberstatesTotal = 1 }
		}

		# Calculates Pop Ratio
		for_each_scope_loop = {
			array = global.EU_member
			set_variable = { THIS.var_EUpopRatio = 0 }
			add_to_variable = { THIS.var_EUpopRatio = THIS.max_manpower_k }
			divide_variable = { THIS.var_EUpopRatio = 100 } # Converts to 100,000 to match the GDP
			divide_variable = { THIS.var_EUpopRatio = global.var_EUpopTotal }
		}
		# End of EU Population Calculations

		# Euroscepticism update
		for_each_scope_loop = {
			array = global.EU_potential
			clamp_variable = {
				var = THIS.eurosceptic
				min = 0
				max = 1
			}
		}
		###End of Euroscepticism update

		###Europeanism update
		set_variable = { var = global.var_europeanism value = 0 }

		for_each_scope_loop = {
			array = global.EU_member
			set_variable = { THIS.var_proeuropean = 1 }

			subtract_from_variable = { THIS.var_proeuropean = THIS.eurosceptic }
			set_temp_variable = { converted_manpower = max_manpower_k }
			divide_temp_variable = { converted_manpower = 100 }
			multiply_variable = { THIS.var_proeuropean = converted_manpower }
		}

		for_each_scope_loop = {
			array = global.EU_member
			add_to_variable = { global.var_europeanism = THIS.var_proeuropean }
		}
		divide_variable = { global.var_europeanism = global.var_EUpopTotal }
		###End of Europeanism update
	}
}

#######################################
###     Changing Euroscepticism     ###
#######################################
# set_temp_variable = { modify_eurosceptic = +- }
# set_temp_variable = { modify_eurosceptic_target = ROOT/THIS/PREV/FROM or country TAG }
eurosceptic_change = {
	custom_effect_tooltip = tooltip_eurosceptic_change
	hidden_effect = {
		log = "[GetDateText]: [FROM.GetTag]: 99_EU_scripted_effects [?modify_eurosceptic_target] eurosceptic_change [?modify_eurosceptic]"
		var:modify_eurosceptic_target = { add_to_variable = { eurosceptic = modify_eurosceptic } }
		EU_update_vars = yes
	}
}

##############################################################
### Changing Euroscepticism of all (current) member states ###
##############################################################

# set_temp_variable = { modify_eurosceptic = +- }
EU_eurosceptic_change = {
	custom_effect_tooltip = tooltip_EU_eurosceptic_change
	hidden_effect = {
		log = "[GetDateText]: [FROM.GetTag]: 99_EU_scripted_effects EU_eurosceptic_change [?modify_eurosceptic]"
		for_each_scope_loop = {
			array = global.EU_member
			add_to_variable = { THIS.eurosceptic = modify_eurosceptic }
		}
		EU_update_vars = yes
	}
}

##########################################################################
### Changing Euroscepticism of all current AND potential member states ###
##########################################################################

# set_temp_variable = { modify_eurosceptic = +- }
EU_potential_eurosceptic_change = {
	custom_effect_tooltip = tooltip_EU_potential_eurosceptic_change
	hidden_effect = {
		log = "[GetDateText]: [FROM.GetTag]: 99_EU_scripted_effects EU_potential_eurosceptic_change [?modify_eurosceptic]"
		for_each_scope_loop = {
			array = global.EU_potential
			add_to_variable = { THIS.eurosceptic = modify_eurosceptic }
		}
		EU_update_vars = yes
	}
}

### Inventment in the single market
### use in country scope
### TAG is investee

invest_in_EU_single_market_cic = {
	if = {
		limit = {
			THIS = {
				any_owned_state = {
					free_building_slots = {
						building = industrial_complex size > 0
						include_locked = no
					}
				}
			}
		}
		custom_effect_tooltip = tooltip_invest_in_EU_single_market_cic
		hidden_effect = {
			THIS = {
				random_owned_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex size > 0
							include_locked = no
						}
					}
					invest_cic = yes
				}
			}
		}
		set_temp_variable = { modify_eurosceptic = -0.03 }
		set_temp_variable = { modify_eurosceptic_target = THIS }
		eurosceptic_change = yes
		set_temp_variable = { modify_eurosceptic_target = ROOT }
		eurosceptic_change = yes
	}
}

invest_in_EU_single_market_infra = {
	if = {
		limit = {
			THIS = {
				any_owned_state = {
					infrastructure < 5
				}
			}
		}
		custom_effect_tooltip = tooltip_invest_in_EU_single_market_infra
		hidden_effect = {
			THIS = {
				random_owned_state = {
					limit = { infrastructure < 5 }
					invest_infra = yes
				}
			}
		}
		set_temp_variable = { modify_eurosceptic = -0.03 }
		set_temp_variable = { modify_eurosceptic_target = THIS }
		eurosceptic_change = yes
		set_temp_variable = { modify_eurosceptic_target = ROOT }
		eurosceptic_change = yes
	}
}

EU_money_for_influence = {
	custom_effect_tooltip = tooltip_EU_money_for_influence
	hidden_effect = {
		add_to_variable = { THIS.treasury = 10 }
		set_temp_variable = { percent_change = 1 }
		set_temp_variable = { tag_index = ROOT.id }
		set_temp_variable = { influence_target = THIS.id }
		change_influence_percentage = yes
	}
	set_temp_variable = { modify_eurosceptic = -0.03 }
	set_temp_variable = { modify_eurosceptic_target = THIS }
	eurosceptic_change = yes
	set_temp_variable = { modify_eurosceptic_target = ROOT }
	eurosceptic_change = yes
}

################################
### ECB OMT scripted effects ###
################################

execute_OMT = {
	custom_effect_tooltip = tooltip_ECB_Outright_Monetary_Transactions_complete_effect
	hidden_effect = {
		every_country = {
			limit = {
				has_idea = EU_member
			}
			#log = "start OTM interest_rate [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
			if = {
				limit = {
					has_idea = the_euro
					check_variable = {
						var = THIS.debt
						value = 10000.0
						compare = greater_than_or_equals
					}
				}
				set_variable = {
					var = THIS.OMT_account
					value = 0
				}
				while_loop_effect = {
						limit = {
							check_variable = { THIS.interest_rate > 4.0 }
							check_variable = { global.OMT_size_limit > global.OMT_total_value }
						}
						#log = "while_loop_effect interest_rate [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
						if = {
							limit = {
								check_variable = { THIS.interest_rate > 4.0 }
							}
							#log = "[THIS.GetTag] subtract_from_variable = { THIS.debt = 1000.0 } [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
							subtract_from_variable = { THIS.debt = 1000.0 }
							#log = "[THIS.GetTag] add_to_variable = { THIS.OMT_account = 1000.0 } [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
							add_to_variable = { THIS.OMT_account = 1000.0 }
							#log = "[THIS.GetTag] add_to_variable = { global.OMT_total_value = 1000.0 } [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
							add_to_variable = { global.OMT_total_value = 1000.0 }
							calculate_interest_rate = yes
						}
				}
			}
			else_if = {
				limit = {
					has_idea = the_euro
					check_variable = { THIS.debt < 10000.0 }
					check_variable = {
						var = THIS.debt
						value = 1000.0
						compare = greater_than_or_equals
					}
				}
				set_variable = {
					var = THIS.OMT_account
					value = 0
				}
				while_loop_effect = {
					limit = {
						check_variable = { THIS.interest_rate > 4.0 }
						check_variable = { global.OMT_size_limit > global.OMT_total_value }
					}
						if = {
							limit = {
								check_variable = { THIS.interest_rate > 4.0 }
							}

							#log = "[THIS.GetTag] subtract_from_variable = { THIS.debt = 100.0 } [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
							subtract_from_variable = { THIS.debt = 100.0 }
							#log = "[THIS.GetTag] add_to_variable = { THIS.OMT_account = 100.0 } [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
							add_to_variable = { THIS.OMT_account = 100.0 }
							#log = "[THIS.GetTag] add_to_variable = { global.OMT_total_value = 100.0 } [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
							add_to_variable = { global.OMT_total_value = 100.0 }
							#log = "[THIS.GetTag] calculate_interest_rate = yes [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
							calculate_interest_rate = yes

						}
				}
			}
			else_if = {
				limit = {
					has_idea = the_euro
					check_variable = { THIS.debt < 1000.0 }
					check_variable = {
						var = THIS.debt
						value = 100.0
						compare = greater_than_or_equals
					}
				}
				set_variable = {
					var = THIS.OMT_account
					value = 0
				}
				while_loop_effect = {
						limit = {
							check_variable = { THIS.interest_rate > 4.0 }
							check_variable = { global.OMT_size_limit > global.OMT_total_value }
						}
						if = {
							limit = {
								check_variable = { THIS.interest_rate > 4.0 }
							}

							#log = "[THIS.GetTag] subtract_from_variable = { THIS.debt = 10.0 } [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
							subtract_from_variable = { THIS.debt = 10.0 }
							#log = "[THIS.GetTag] add_to_variable = { THIS.OMT_account = 10.0 } [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
							add_to_variable = { THIS.OMT_account = 10.0 }
							#log = "[THIS.GetTag] add_to_variable = { global.OMT_total_value = 10.0 } [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
							add_to_variable = { global.OMT_total_value = 10.0 }
							#log = "[THIS.GetTag] calculate_interest_rate = yes [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
							calculate_interest_rate = yes
						}
				}
			}
			else_if = {
				limit = {
					has_idea = the_euro
					check_variable = { THIS.debt < 100.0 }
					check_variable = {
						var = THIS.debt
						value = 10.0
						compare = greater_than_or_equals
					}
				}
				set_variable = {
					var = THIS.OMT_account
					value = 0
				}
				while_loop_effect = {
						limit = {
							check_variable = { THIS.interest_rate > 4.0 }
							check_variable = { global.OMT_size_limit > global.OMT_total_value }
						}
						if = {
							limit = {
								check_variable = { THIS.interest_rate > 4.0 }
							}

							#log = "[THIS.GetTag] subtract_from_variable = { THIS.debt = 1.0 } [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
							subtract_from_variable = { THIS.debt = 1.0 }
							#log = "[THIS.GetTag] add_to_variable = { THIS.OMT_account = 1.0 } [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
							add_to_variable = { THIS.OMT_account = 1.0 }
							#log = "[THIS.GetTag] add_to_variable = { global.OMT_total_value = 1.0 } [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
							add_to_variable = { global.OMT_total_value = 1.0 }
							#log = "[THIS.GetTag] calculate_interest_rate = yes [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
							calculate_interest_rate = yes
						}
				}
			}
			else_if = {
				limit = {
					has_idea = the_euro
					check_variable = { THIS.debt < 10.0 }
					check_variable = {
						var = THIS.debt
						value = 1.0
						compare = greater_than_or_equals
					}
				}
				set_variable = {
					var = THIS.OMT_account
					value = 0
				}
				while_loop_effect = {
					limit = {
						check_variable = { THIS.interest_rate > 4.0 }
						check_variable = { global.OMT_size_limit > global.OMT_total_value }
					}
					if = {
						limit = {
							check_variable = { THIS.interest_rate > 4.0 }
						}

						#log = "[THIS.GetTag] subtract_from_variable = { THIS.debt = 0.1 } [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
						subtract_from_variable = { THIS.debt = 0.1 }
						#log = "[THIS.GetTag] add_to_variable = { THIS.OMT_account = 0.1 } [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
						add_to_variable = { THIS.OMT_account = 0.1 }
						#log = "[THIS.GetTag] add_to_variable = { global.OMT_total_value = 0.1 } [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
						add_to_variable = { global.OMT_total_value = 0.1 }
						#log = "[THIS.GetTag] calculate_interest_rate = yes [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
						calculate_interest_rate = yes

					}
				}
			}
		}
		#log = "END OF LOOP OTM interest_rate [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
	}
}

remove_OMT = {
	custom_effect_tooltip = tooltip_ECB_Outright_Monetary_Transactions_remove_effect
	hidden_effect = {
		every_country = {
			limit = {
				has_idea = EU_member
			}
			if = {
				limit = {
					has_idea = the_euro
				}
				log = "remove_effect interest_rate [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
				add_to_variable = {
					var = THIS.debt
					value = THIS.OMT_account
				}
				clear_variable = THIS.OMT_account
				clear_variable = global.OMT_total_value
				log = "remove_effect end interest_rate [THIS.GetTag] [?THIS.interest_rate] debt [?THIS.debt] OMT_size_limit [?global.OMT_size_limit] OMT_total_value [?global.OMT_total_value]"
			}
		}
	}
}

#####################################
### Leaving EU scripted effects  ####
#####################################

leaving_EU = {

	remove_ideas = EU_member
	#EU_Clear_Voting = yes ### old one
	EU_clear_voting = yes ### new one
	remove_ideas = the_euro
	clr_country_flag = EU_candidate
	custom_effect_tooltip = tooltip_EU_remove_laws_and_offices
		hidden_effect = {
		### EU law and offices
		#EU laws
		remove_ideas = EUU_CFR_EU
		remove_ideas = ECB_zero_interest_rate_policy
		remove_ideas = euro_bonds
		remove_ideas = european_debt_crisis
		remove_ideas = euro_rescue_package
		remove_ideas = fiscal_union
		remove_ideas = European_Economic_Government
		remove_from_tech_sharing_group = EU_Tech_Share
		remove_ideas = European_Defence_Fund
		remove_ideas = European_Security_Council
		remove_ideas = EU_nuke_power
		remove_ideas = EUU_idea_gdpr
		remove_ideas = EU_copyright
		remove_ideas = Migrant_Crisis_Europe
		remove_ideas = relocation_asylum_seekers
		remove_ideas = EU_Turkey_deal
		remove_ideas = European_Asylum_Agency
		remove_ideas = Frontex
		#EU offices
		remove_ideas = EU_commission_president
		remove_ideas = EU_council_president
		remove_ideas = EU_foreign_minister
		remove_ideas = EU_parliament_president
		remove_ideas = ECB_president
		remove_ideas = EU_finance_minister
		remove_ideas = frontex_ExDir
		remove_ideas = EUU_euronavy_sc
		remove_ideas = EUU_euroarmy_sc
		remove_ideas = EUU_ambassador_unsc
		if = {
			limit = {
				has_idea = EUU_ambassador_unsc
				NOT = {
					tag = ENG
					tag = FRA
					has_country_flag = reformed_council
				}
			}
			remove_ideas = p5_member
		}
		remove_ideas = EU_president
		### End of EU law and offices
		### leave EDU
		if = {
			limit = {
				has_global_flag = EDU
			}
			leave_faction = yes
		}
		### clear focus flags for leaving, set for remaining
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU001 }
			}
			THIS = { clr_country_flag = focus_EU001 }
			every_country = {
				limit = {
					has_idea = EU_member
				}
				set_global_flag = focus_EU001_retry
			}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU001_yes }
			}
			THIS = { clr_country_flag = focus_EU001_yes }
			random_country = {
				limit = { has_idea = EU_member }
				set_country_flag = focus_EU001_yes
			}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU001_QMV_yes }
			}
			THIS = { clr_country_flag = focus_EU001_QMV_yes }
			random_country = {
				limit = { has_idea = EU_member }
				set_country_flag = focus_EU001_QMV_yes
			}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU001_maj_yes }
			}
			THIS = { clr_country_flag = focus_EU001_maj_yes }
			random_country = {
				limit = { has_idea = EU_member }
				set_country_flag = focus_EU001_maj_yes
			}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU002 }
			}
			THIS = { clr_country_flag = focus_EU002 }
			every_country = {
				limit = {
					has_idea = EU_member
				}
				set_global_flag = focus_EU002_retry
			}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU002_yes }
			}
			THIS = { clr_country_flag = focus_EU002_yes }
			random_country = {
				limit = { has_idea = EU_member }
				set_country_flag = focus_EU002_yes
			}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU002_QMV_yes }
			}
			THIS = { clr_country_flag = focus_EU002_QMV_yes }
			random_country = {
				limit = { has_idea = EU_member }
				set_country_flag = focus_EU002_QMV_yes
			}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU002_maj_yes }
			}
			THIS = { clr_country_flag = focus_EU002_maj_yes }
			random_country = {
				limit = { has_idea = EU_member }
				set_country_flag = focus_EU002_maj_yes
			}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU100 }
			}
			THIS = { clr_country_flag = focus_EU100 }
			every_country = {
				limit = {
					has_idea = EU_member
				}
				set_global_flag = focus_EU100_retry
			}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU100_yes }
			}
			THIS = { clr_country_flag = focus_EU100_yes }
			random_country = {
				limit = { has_idea = EU_member }
				set_country_flag = focus_EU100_yes
			}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU100_QMV_yes }
			}
			THIS = { clr_country_flag = focus_EU100_QMV_yes }
			random_country = {
				limit = { has_idea = EU_member }
				set_country_flag = focus_EU100_QMV_yes
			}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU100_maj_yes }
			}
			THIS = { clr_country_flag = focus_EU100_maj_yes }
			random_country = {
				limit = { has_idea = EU_member }
				set_country_flag = focus_EU100_maj_yes
			}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU101 }
			}
			THIS = { clr_country_flag = focus_EU101 }
			every_country = {
				limit = {
					has_idea = EU_member
				}
				set_global_flag = focus_EU101_retry
			}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU101_yes }
			}
			THIS = { clr_country_flag = focus_EU101_yes }
			random_country = {
				limit = { has_idea = EU_member }
				set_country_flag = focus_EU101_yes
			}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU101_QMV_yes }
			}
			THIS = { clr_country_flag = focus_EU101_QMV_yes }
			random_country = {
				limit = { has_idea = EU_member }
				set_country_flag = focus_EU101_QMV_yes
			}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU101_maj_yes }
			}
			THIS = { clr_country_flag = focus_EU101_maj_yes }
			random_country = {
				limit = { has_idea = EU_member }
				set_country_flag = focus_EU101_maj_yes
			}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU102 }
			}
			THIS = { clr_country_flag = focus_EU102 }
			every_country = {
				limit = {
					has_idea = EU_member
				}
				set_global_flag = focus_EU102_retry
			}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU102_yes }
			}
				THIS = { clr_country_flag = focus_EU102_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU102_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU102_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU102_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU102_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU102_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU102_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU102_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU103 }
			}
				THIS = { clr_country_flag = focus_EU103 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU103_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU103_yes }
			}
				THIS = { clr_country_flag = focus_EU103_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU103_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU103_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU103_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU103_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU103_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU103_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU103_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU104 }
			}
				THIS = { clr_country_flag = focus_EU104 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU104_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU104_yes }
			}
				THIS = { clr_country_flag = focus_EU104_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU104_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU104_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU104_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU104_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU104_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU104_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU104_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU105 }
			}
				THIS = { clr_country_flag = focus_EU105 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU105_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU105_yes }
			}
				THIS = { clr_country_flag = focus_EU105_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU105_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU105_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU105_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU105_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU105_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU105_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU105_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU200 }
			}
				THIS = { clr_country_flag = focus_EU200 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU200_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU200_yes }
			}
				THIS = { clr_country_flag = focus_EU200_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU200_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU200_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU200_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU200_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU200_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU200_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU200_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU201 }
			}
				THIS = { clr_country_flag = focus_EU201 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU201_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU201_yes }
			}
				THIS = { clr_country_flag = focus_EU201_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU201_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU201_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU201_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU201_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU201_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU201_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU201_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU202 }
			}
				THIS = { clr_country_flag = focus_EU202 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU202_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU202_yes }
			}
				THIS = { clr_country_flag = focus_EU202_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU202_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU202_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU202_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU202_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU202_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU202_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU202_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU203 }
			}
				THIS = { clr_country_flag = focus_EU203 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU203_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU203_yes }
			}
				THIS = { clr_country_flag = focus_EU203_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU203_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU203_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU203_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU203_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU203_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU203_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU203_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU204 }
			}
				THIS = { clr_country_flag = focus_EU204 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU204_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU204_yes }
			}
				THIS = { clr_country_flag = focus_EU204_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU204_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU204_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU204_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU204_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU204_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU204_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU204_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU205 }
			}
				THIS = { clr_country_flag = focus_EU205 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU205_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU205_yes }
			}
				THIS = { clr_country_flag = focus_EU205_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU205_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU205_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU205_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU205_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU205_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU205_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU205_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU206 }
			}
				THIS = { clr_country_flag = focus_EU206 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU206_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU206_yes }
			}
				THIS = { clr_country_flag = focus_EU206_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU206_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU206_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU206_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU206_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU206_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU206_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU206_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU207 }
			}
				THIS = { clr_country_flag = focus_EU207 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU207_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU207_yes }
			}
				THIS = { clr_country_flag = focus_EU207_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU207_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU207_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU207_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU207_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU207_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU207_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU207_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU208 }
			}
				THIS = { clr_country_flag = focus_EU208 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU208_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU208_yes }
			}
				THIS = { clr_country_flag = focus_EU208_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU208_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU208_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU208_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU208_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU208_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU208_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU208_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU300 }
			}
				THIS = { clr_country_flag = focus_EU300 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU300_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU300_yes }
			}
				THIS = { clr_country_flag = focus_EU300_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU300_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU300_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU300_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU300_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU300_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU300_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU300_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU301 }
			}
				THIS = { clr_country_flag = focus_EU301 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU301_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU301_yes }
			}
				THIS = { clr_country_flag = focus_EU301_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU301_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU301_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU301_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU301_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU301_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU301_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU301_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU302 }
			}
				THIS = { clr_country_flag = focus_EU302 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU302_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU302_yes }
			}
				THIS = { clr_country_flag = focus_EU302_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU302_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU302_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU302_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU302_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU302_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU302_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU302_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU303 }
			}
				THIS = { clr_country_flag = focus_EU303 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU303_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU303_yes }
			}
				THIS = { clr_country_flag = focus_EU303_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU303_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU303_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU303_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU303_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU303_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU303_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU303_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU304 }
			}
				THIS = { clr_country_flag = focus_EU304 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU304_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU304_yes }
			}
				THIS = { clr_country_flag = focus_EU304_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU304_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU304_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU304_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU304_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU304_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU304_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU304_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU305 }
			}
				THIS = { clr_country_flag = focus_EU305 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU305_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU305_yes }
			}
				THIS = { clr_country_flag = focus_EU305_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU305_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU305_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU305_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU305_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU305_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU305_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU305_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU306 }
			}
				THIS = { clr_country_flag = focus_EU306 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU306_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU306_yes }
			}
				THIS = { clr_country_flag = focus_EU306_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU306_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU306_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU306_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU306_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU306_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU306_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU306_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU307 }
			}
				THIS = { clr_country_flag = focus_EU307 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU307_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU307_yes }
			}
				THIS = { clr_country_flag = focus_EU307_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU307_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU307_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU307_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU307_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU307_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU307_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU307_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU308 }
			}
				THIS = { clr_country_flag = focus_EU308 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU308_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU308_yes }
			}
				THIS = { clr_country_flag = focus_EU308_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU308_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU308_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU308_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU308_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU308_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU308_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU308_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU400 }
			}
				THIS = { clr_country_flag = focus_EU400 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU400_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU400_yes }
			}
				THIS = { clr_country_flag = focus_EU400_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU400_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU400_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU400_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU400_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU400_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU400_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU400_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU401 }
			}
				THIS = { clr_country_flag = focus_EU401 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU401_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU401_yes }
			}
				THIS = { clr_country_flag = focus_EU401_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU401_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU401_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU401_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU401_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU401_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU401_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU401_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU402 }
			}
				THIS = { clr_country_flag = focus_EU402 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU402_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU402_yes }
			}
				THIS = { clr_country_flag = focus_EU402_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU402_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU402_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU402_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU402_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU402_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU402_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU402_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU403 }
			}
				THIS = { clr_country_flag = focus_EU403 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU403_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU403_yes }
			}
				THIS = { clr_country_flag = focus_EU403_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU403_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU403_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU403_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU403_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU403_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU403_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU403_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU404 }
			}
				THIS = { clr_country_flag = focus_EU404 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU404_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU404_yes }
			}
				THIS = { clr_country_flag = focus_EU404_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU404_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU404_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU404_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU404_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU404_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU404_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU404_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU405 }
			}
				THIS = { clr_country_flag = focus_EU405 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU405_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU405_yes }
			}
				THIS = { clr_country_flag = focus_EU405_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU405_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU405_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU405_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU405_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU405_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU405_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU405_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU406 }
			}
				THIS = { clr_country_flag = focus_EU406 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU406_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU406_yes }
			}
				THIS = { clr_country_flag = focus_EU406_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU406_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU406_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU406_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU406_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU406_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU406_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU406_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU407 }
			}
				THIS = { clr_country_flag = focus_EU407 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU407_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU407_yes }
			}
				THIS = { clr_country_flag = focus_EU407_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU407_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU407_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU407_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU407_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU407_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU407_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU407_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU408 }
			}
				THIS = { clr_country_flag = focus_EU408 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU408_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU408_yes }
			}
				THIS = { clr_country_flag = focus_EU408_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU408_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU408_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU408_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU408_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU408_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU408_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU408_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU500 }
			}
				THIS = { clr_country_flag = focus_EU500 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU500_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU500_yes }
			}
				THIS = { clr_country_flag = focus_EU500_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU500_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU500_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU500_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU500_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU500_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU500_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU500_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU600 }
			}
				THIS = { clr_country_flag = focus_EU600 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU600_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU600_yes }
			}
				THIS = { clr_country_flag = focus_EU600_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU600_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU600_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU600_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU600_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU600_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU600_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU600_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU601 }
			}
				THIS = { clr_country_flag = focus_EU601 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU601_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU601_yes }
			}
				THIS = { clr_country_flag = focus_EU601_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU601_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU601_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU601_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU601_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU601_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU601_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU601_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU602 }
			}
				THIS = { clr_country_flag = focus_EU602 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU602_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU602_yes }
			}
				THIS = { clr_country_flag = focus_EU602_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU602_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU602_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU602_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU602_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU602_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU602_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU602_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU603 }
			}
				THIS = { clr_country_flag = focus_EU603 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU603_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU603_yes }
			}
				THIS = { clr_country_flag = focus_EU603_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU603_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU603_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU603_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU603_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU603_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU603_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU603_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU110 }
			}
				THIS = { clr_country_flag = focus_EU110 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU110_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU110_yes }
			}
				THIS = { clr_country_flag = focus_EU110_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU110_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU110_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU110_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU110_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU110_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU110_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU110_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU111 }
			}
				THIS = { clr_country_flag = focus_EU111 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU111_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU111_yes }
			}
				THIS = { clr_country_flag = focus_EU111_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU111_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU111_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU111_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU111_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU111_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU111_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU111_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU112 }
			}
				THIS = { clr_country_flag = focus_EU112 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU112_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU112_yes }
			}
				THIS = { clr_country_flag = focus_EU112_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU112_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU112_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU112_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU112_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU112_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU112_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU112_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU113 }
			}
				THIS = { clr_country_flag = focus_EU113 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU113_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU113_yes }
			}
				THIS = { clr_country_flag = focus_EU113_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU113_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU113_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU113_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU113_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU113_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU113_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU113_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU604 }
			}
				THIS = { clr_country_flag = focus_EU604 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU604_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU604_yes }
			}
				THIS = { clr_country_flag = focus_EU604_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU604_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU604_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU604_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU604_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU604_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU604_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU604_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU605 }
			}
				THIS = { clr_country_flag = focus_EU605 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU605_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU605_yes }
			}
				THIS = { clr_country_flag = focus_EU605_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU605_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU605_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU605_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU605_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU605_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU605_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU605_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU606 }
			}
				THIS = { clr_country_flag = focus_EU606 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU606_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU606_yes }
			}
				THIS = { clr_country_flag = focus_EU606_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU606_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU606_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU606_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU606_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU606_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU606_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU606_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU607 }
			}
				THIS = { clr_country_flag = focus_EU607 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU607_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU607_yes }
			}
				THIS = { clr_country_flag = focus_EU607_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU607_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU607_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU607_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU607_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU607_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU607_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU607_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU608 }
			}
				THIS = { clr_country_flag = focus_EU608 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU608_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU608_yes }
			}
				THIS = { clr_country_flag = focus_EU608_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU608_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU608_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU608_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU608_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU608_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU608_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU608_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU609 }
			}
				THIS = { clr_country_flag = focus_EU609 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU609_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU609_yes }
			}
				THIS = { clr_country_flag = focus_EU609_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU609_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU609_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU609_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU609_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU609_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU609_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU609_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU610 }
			}
				THIS = { clr_country_flag = focus_EU610 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU610_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU610_yes }
			}
				THIS = { clr_country_flag = focus_EU610_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU610_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU610_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU610_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU610_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU610_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU610_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU610_maj_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU611 }
			}
				THIS = { clr_country_flag = focus_EU611 }
				every_country = {
					limit = {
						has_idea = EU_member
					}
					set_global_flag = focus_EU611_retry
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU611_yes }
			}
				THIS = { clr_country_flag = focus_EU611_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU611_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU611_QMV_yes }
			}
				THIS = { clr_country_flag = focus_EU611_QMV_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU611_QMV_yes
				}
		}
		if = {
			limit = {
				THIS = { has_country_flag = focus_EU611_maj_yes }
			}
				THIS = { clr_country_flag = focus_EU611_maj_yes }
				random_country = {
					limit = { has_idea = EU_member }
					set_country_flag = focus_EU611_maj_yes
				}
		}
		### end of focus flag clearing and setting
	}
}

##############################
### EU Naval Tech transfer ###
##############################

EU_set_most_advanced_naval_tech = {
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = Nuclear_carrier_0
			}
		}
		set_technology = {
			Nuclear_carrier_0 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = Nuclear_carrier_1
			}
		}
		set_technology = {
			Nuclear_carrier_1 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = Nuclear_carrier_2
			}
		}
		set_technology = {
			Nuclear_carrier_2 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = Nuclear_carrier_3
			}
		}
		set_technology = {
			Nuclear_carrier_3 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = Nuclear_carrier_4
			}
		}
		set_technology = {
			Nuclear_carrier_4 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = Nuclear_carrier_5
			}
		}
		set_technology = {
			Nuclear_carrier_5 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = modern_carrier_0
			}
		}
		set_technology = {
			modern_carrier_0 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = modern_carrier_1
			}
		}
		set_technology = {
			modern_carrier_1 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = modern_carrier_2
			}
		}
		set_technology = {
			modern_carrier_2 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = modern_carrier_3
			}
		}
		set_technology = {
			modern_carrier_3 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = modern_carrier_4
			}
		}
		set_technology = {
			modern_carrier_4 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = modern_carrier_5
			}
		}
		set_technology = {
			modern_carrier_5 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = modern_carrier_6
			}
		}
		set_technology = {
			modern_carrier_6 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = LHA_0
			}
		}
		set_technology = {
			LHA_0 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = LHA_1
			}
		}
		set_technology = {
			LHA_1 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = LHA_2
			}
		}
		set_technology = {
			LHA_2 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = LHA_3
			}
		}
		set_technology = {
			LHA_3 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = LHA_4
			}
		}
		set_technology = {
			LHA_4 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = LPD_0
			}
		}
		set_technology = {
			LPD_0 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = LPD_1
			}
		}
		set_technology = {
			LPD_1 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = LPD_2
			}
		}
		set_technology = {
			LPD_2 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = LPD_3
			}
		}
		set_technology = {
			LPD_3 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = LPD_4
			}
		}
		set_technology = {
			LPD_4 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = N_B_Cruiser_2
			}
		}
		set_technology = {
			N_B_Cruiser_2 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = N_B_Cruiser_5
			}
		}
		set_technology = {
			N_B_Cruiser_5 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = N_B_Cruiser_6
			}
		}
		set_technology = {
			N_B_Cruiser_6 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = N_B_Cruiser_7
			}
		}
		set_technology = {
			N_B_Cruiser_7 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = cruiser_1
			}
		}
		set_technology = {
			cruiser_1 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = cruiser_2
			}
		}
		set_technology = {
			cruiser_2 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_cruiser_1
			}
		}
		set_technology = {
			missile_cruiser_1 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_cruiser_4
			}
		}
		set_technology = {
			missile_cruiser_4 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_cruiser_5
			}
		}
		set_technology = {
			missile_cruiser_5 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_cruiser_6
			}
		}
		set_technology = {
			missile_cruiser_6 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = destroyer_1
			}
		}
		set_technology = {
			destroyer_1 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = destroyer_2
			}
		}
		set_technology = {
			destroyer_2 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_destroyer_1
			}
		}
		set_technology = {
			missile_destroyer_1 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_destroyer_2
			}
		}
		set_technology = {
			missile_destroyer_2 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_destroyer_3
			}
		}
		set_technology = {
			missile_destroyer_3 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_destroyer_4
			}
		}
		set_technology = {
			missile_destroyer_4 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_destroyer_5
			}
		}
		set_technology = {
			missile_destroyer_5 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_destroyer_6
			}
		}
		set_technology = {
			missile_destroyer_6 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = frigate_1
			}
		}
		set_technology = {
			frigate_1 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = frigate_2
			}
		}
		set_technology = {
			frigate_2 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_frigate_1
			}
		}
		set_technology = {
			missile_frigate_1 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_frigate_2
			}
		}
		set_technology = {
			missile_frigate_2 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_frigate_3
			}
		}
		set_technology = {
			missile_frigate_3 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_frigate_4
			}
		}
		set_technology = {
			missile_frigate_4 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_frigate_5
			}
		}
		set_technology = {
			missile_frigate_5 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_frigate_6
			}
		}
		set_technology = {
			missile_frigate_6 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = corvette_1
			}
		}
		set_technology = {
			corvette_1 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = corvette_2
			}
		}
		set_technology = {
			corvette_2 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_corvette_1
			}
		}
		set_technology = {
			missile_corvette_1 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_corvette_2
			}
		}
		set_technology = {
			missile_corvette_2 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_corvette_3
			}
		}
		set_technology = {
			missile_corvette_3 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_corvette_4
			}
		}
		set_technology = {
			missile_corvette_4 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_corvette_5
			}
		}
		set_technology = {
			missile_corvette_5 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_corvette_6
			}
		}
		set_technology = {
			missile_corvette_6 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = landing_craft
			}
		}
		set_technology = {
			landing_craft = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = amphibious_assault_ship
			}
		}
		set_technology = {
			amphibious_assault_ship = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = landing_craft_air_cushioned
			}
		}
		set_technology = {
			landing_craft_air_cushioned = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = modern_landing_craft
			}
		}
		set_technology = {
			modern_landing_craft = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = submarine_1
			}
		}
		set_technology = {
			submarine_1 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = attack_submarine_1
			}
		}
		set_technology = {
			attack_submarine_1 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = attack_submarine_2
			}
		}
		set_technology = {
			attack_submarine_2 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = attack_submarine_3
			}
		}
		set_technology = {
			attack_submarine_3 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = attack_submarine_4
			}
		}
		set_technology = {
			attack_submarine_4 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = attack_submarine_5
			}
		}
		set_technology = {
			attack_submarine_5 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = attack_submarine_6
			}
		}
		set_technology = {
			attack_submarine_6 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = attack_submarine_7
			}
		}
		set_technology = {
			attack_submarine_7 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_submarine_1
			}
		}
		set_technology = {
			missile_submarine_1 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_submarine_2
			}
		}
		set_technology = {
			missile_submarine_2 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_submarine_3
			}
		}
		set_technology = {
			missile_submarine_3 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_submarine_5
			}
		}
		set_technology = {
			missile_submarine_5 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_submarine_6
			}
		}
		set_technology = {
			missile_submarine_6 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = missile_submarine_7
			}
		}
		set_technology = {
			missile_submarine_7 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = diesel_attack_submarine_1
			}
		}
		set_technology = {
			diesel_attack_submarine_1 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = diesel_attack_submarine_2
			}
		}
		set_technology = {
			diesel_attack_submarine_2 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = diesel_attack_submarine_3
			}
		}
		set_technology = {
			diesel_attack_submarine_3 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = diesel_attack_submarine_4
			}
		}
		set_technology = {
			diesel_attack_submarine_4 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = diesel_attack_submarine_5
			}
		}
		set_technology = {
			diesel_attack_submarine_5 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = diesel_attack_submarine_6
			}
		}
		set_technology = {
			diesel_attack_submarine_6 = 1
		}
	}
	if = {
		limit = {
			any_country = {
				has_idea = EU_member
				has_tech = diesel_attack_submarine_7
			}
		}
		set_technology = {
			diesel_attack_submarine_7 = 1
		}
	}

}

##########################
### breach of EU value ###
##########################
check_breach_of_EU_value = {
	set_variable = { THIS.breach_of_EU_value = 0 }
	### Corruption Level Addition ###
	if = { limit = { has_idea = paralyzing_corruption }
		add_to_variable = { THIS.breach_of_EU_value = 5 }
	}
	else_if = { limit = { has_idea = crippling_corruption }
		add_to_variable = { THIS.breach_of_EU_value = 4 }
	}
	else_if = { limit = { has_idea = rampant_corruption }
		add_to_variable = { THIS.breach_of_EU_value = 3 }
	}
	else_if = { limit = { has_idea = unrestrained_corruption }
		add_to_variable = { THIS.breach_of_EU_value = 2 }
	}
	else_if = { limit = { has_idea = systematic_corruption }
		add_to_variable = { THIS.breach_of_EU_value = 1 }
	}
	### peace ###
	if = {
		limit = {
			has_offensive_war = yes
			any_enemy_country = {
				has_idea = EU_member
			}
		}
		add_to_variable = { THIS.breach_of_EU_value = 10 }
	}
	### government ###
	if = { limit = { has_communist_in_coalition = yes }
		add_to_variable = { THIS.breach_of_EU_value = 1 }
	}
	if = { limit = { has_reactionary_in_coalition = yes }
		add_to_variable = { THIS.breach_of_EU_value = 1 }
	}
	if = { limit = { has_communist_government = yes }
		add_to_variable = { THIS.breach_of_EU_value = 2 }
	}
	if = { limit = { has_reactionary_government = yes }
		add_to_variable = { THIS.breach_of_EU_value = 2 }
	}
	### women ###
	if = { limit = { has_idea = no_women_in_military }
		add_to_variable = { THIS.breach_of_EU_value = 1 }
	}
	### intervention ###
	if = { limit = { has_idea = intervention_neo_imperialism }
		add_to_variable = { THIS.breach_of_EU_value = 1 }
	}
	### minorities ###
	if = { limit = { check_variable = { election_threshold > 0.095 } }
		add_to_variable = { THIS.breach_of_EU_value = 1 }
	}
	### no bailout ###
	if = { limit = { has_idea = bankrupcy }
		add_to_variable = { THIS.breach_of_EU_value = 1 }
	}
	if = { limit = { has_country_flag = bailout_given }
		add_to_variable = { THIS.breach_of_EU_value = 1 }
	}
	### elections ###
	if = { limit = { NOT = { has_elections = yes } }
		add_to_variable = { THIS.breach_of_EU_value = 5 }
	}
	### democracy ###
	if = { limit = { has_idea = dictatorship }
		add_to_variable = { THIS.breach_of_EU_value = 5 }
	}
	if = { limit = { has_idea = communist_dictatorship }
		add_to_variable = { THIS.breach_of_EU_value = 5 }
	}
	if = { limit = { has_idea = fascist_dictatorship }
		add_to_variable = { THIS.breach_of_EU_value = 5 }
	}
	if = { limit = { is_subject = yes }
		add_to_variable = { THIS.breach_of_EU_value = 4 }
	}
}

