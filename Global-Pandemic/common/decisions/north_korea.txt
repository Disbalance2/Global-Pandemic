NKO_united_front_department = {
	NKO_close_kaesong_industrial_park = {
		icon = GFX_decision_generic_factory

		visible = {
			has_idea = NKO_kaesong_industrial_park
		}

		highlight_states = {
			highlight_states_trigger = {
				state = 603
			}
		}

		cost = 100

		complete_effect = {
			set_country_flag = closed_kaesong
			set_temp_variable = { temp_opinion = 5 }
			change_communist_cadres_opinion = yes
			change_the_military_opinion = yes

			KOR = {
				remove_opinion_modifier = {
					target = NKO
					modifier = kaesong_industrial_park
				}
				support_for_reunification_2_less = yes
				remove_ideas = KOR_kaesong_industrial_park
			}
			NKO = {
				remove_opinion_modifier = {
					target = KOR
					modifier = kaesong_industrial_park
				}
				remove_ideas = NKO_kaesong_industrial_park
			}
		}

		ai_will_do = {
			factor = 0
		}
	}

	NKO_reopen_kaesong_industrial_park = {
		icon = GFX_decision_generic_factory

		cost = 100

		visible = {
			has_country_flag = closed_kaesong
		}

		highlight_states = {
			highlight_states_trigger = {
				state = 603
			}
		}

		complete_effect = {
			clr_country_flag = closed_kaesong
			set_temp_variable = { temp_opinion = -5 }
			change_communist_cadres_opinion = yes
			change_the_military_opinion = yes
			KOR = {
				add_opinion_modifier = {
					target = NKO
					modifier = kaesong_industrial_park
				}
				support_for_reunification_2 = yes
				add_ideas = KOR_kaesong_industrial_park
			}
			NKO = {
				add_opinion_modifier = {
					target = KOR
					modifier = kaesong_industrial_park
				}
				add_ideas = NKO_kaesong_industrial_park
			}
		}

		ai_will_do = {
			factor = 0
		}
	}

	NKO_restart_peace_talks = {
		icon = GFX_decision_generic_speech

		visible = {
			has_completed_focus = NKO_offer_negotiations
			has_country_flag = NKO_peace_talks_failed
		}

		highlight_states = {
			highlight_states_trigger = {
				state = 603
			}
		}

		available = {
			NOT = { has_war_with = KOR }
			country_exists = KOR
			KOR = {
				has_opinion = {
					target = NKO
					value > -51
				}
			}
			OR = {
				KOR = { KOR_has_progressive_government = yes }
				KOR = {
					custom_trigger_tooltip = {
						tooltip = KOR_democratic_party_governing_tt
						is_in_array = { ruling_party = 3  }
					}
				}
				NKO = { has_government = democratic }
				NKO = { has_government = neutrality }
			}
		}

		cost = 200

		days_remove = 30

		days_re_enable = 365

		complete_effect = {
			clr_country_flag = NKO_peace_talks_failed
		}

		remove_effect = {
			KOR = {
				country_event = {
					id = korea.33
				}
			}
		}
	}

	NKO_propose_north_led_reunification_decision = {
		icon = GFX_decision_generic_form_nation

		highlight_states = {
			highlight_states_trigger = {
				state = 603
			}
		}

		visible = {
			OR = {
				has_completed_focus = NKO_propose_north_led_unification
				has_completed_focus = NKO_propose_unity_government
			}
			has_country_flag = NKO_reunification_talks_failed
		}

		available = {
			NOT = { has_war_with = KOR }
			country_exists = KOR
			KOR = {
				has_opinion = {
					target = NKO
					value > -26
				}
			}
			OR = {
				KOR = { KOR_has_progressive_government = yes }
				KOR = {
					custom_trigger_tooltip = {
						tooltip = KOR_democratic_party_governing_tt
						is_in_array = { ruling_party = 3  }
					}
				}
				NKO = { has_government = democratic }
				NKO = { has_government = neutrality }
			}
			custom_trigger_tooltip = {
				tooltip = NKO_KOR_Koren_War_Ceasefire_tt
				NOT = { has_opinion_modifier = NKO_KOR_Koren_War_Ceasefire }
			}
		}

		cost = 200

		days_remove = 30

		days_re_enable = 365

		complete_effect = {
			clr_country_flag = NKO_reunification_talks_failed
			set_country_flag = NKO_proposed_north_reunification
		}

		remove_effect = {
			KOR = {
				country_event = {
					id = korea.34
				}
			}
		}

	}

	NKO_propose_unity_reunification_decision = {
		icon = GFX_decision_generic_form_nation
		highlight_states = {
			highlight_states_trigger = {
				state = 603
			}
		}

		visible = {
			OR = {
				has_completed_focus = NKO_propose_north_led_unification
				has_completed_focus = NKO_propose_unity_government
			}
			has_country_flag = NKO_reunification_talks_failed
		}

		available = {
			NOT = { has_war_with = KOR }
			country_exists = KOR
			KOR = {
				has_opinion = {
					target = NKO
					value > -26
				}
			}
			OR = {
				KOR = { KOR_has_progressive_government = yes }
				KOR = {
					custom_trigger_tooltip = {
						tooltip = KOR_democratic_party_governing_tt
						is_in_array = { ruling_party = 3  }
					}
				}
				NKO = { has_government = democratic }
				NKO = { has_government = neutrality }
			}
			custom_trigger_tooltip = {
				tooltip = NKO_KOR_Koren_War_Ceasefire_tt
				NOT = { has_opinion_modifier = NKO_KOR_Koren_War_Ceasefire }
			}
		}

		cost = 200

		days_remove = 30

		days_re_enable = 365

		complete_effect = {
			clr_country_flag = NKO_reunification_talks_failed
			set_country_flag = NKO_proposed_unity_reunification
		}

		remove_effect = {
			KOR = {
				country_event = {
					id = korea.34
				}
			}
		}

	}
}

NKO_Arduous_March = {

	#Send Citizens to Countryside
	NKO_send_citizens = {
		icon = GFX_decision_fist_dec
		cost = 50
		days_remove = 90
		days_re_enable = 45
		visible = {
			has_completed_focus = NKO_land_reclamation
		}
		available = {
			has_completed_focus = NKO_prioritize_to_solve_famine
		}
		complete_effect = {
			add_manpower = -1000
		}
		remove_effect = {
			add_manpower = 800
		}
		modifier = {
			monthly_population = 0.03
			research_speed_factor = -0.02
			political_power_factor = 0.05
			population_tax_income_multiplier_modifier = 0.02
		}
		ai_will_do = {
			base = 1
			modifier = {
				check_variable = {
					var = treasure
					value = 6
					compare = greater_than_or_equals
				}
				factor = 0
			}
		}
	}

	#Send KPA to Countryside
	NKO_send_KPA = {
		icon = GFX_decision_generic_army_support_new
		cost = 50
		days_remove = 90
		days_re_enable = 45
		visible = {
			has_completed_focus = NKO_land_reclamation
		}
		available = {
			has_completed_focus = NKO_prioritize_songun
		}
		complete_effect = {
			add_manpower = -1000
		}
		remove_effect = {
			add_manpower = 800
		}
		modifier = {
			monthly_population = 0.05
			command_power_gain_mult = -0.10
			political_power_factor = 0.05
			corporate_tax_income_multiplier_modifier = 0.02
		}
		ai_will_do = {
			base = 1
			modifier = {
				check_variable = {
					var = treasure
					value = 6
					compare = greater_than_or_equals
				}
				factor = 0
			}
		}
	}

	#Request International Assistance
	International_assistance = {
		icon = GFX_decision_generic_UN
		cost = 20
		visible = {
			always = yes
		}
		available = {
			OR = {
				USA = {
					has_opinion = {
						target = FROM
						value > -6
					}
				}
				SOV = {
					has_opinion = {
						target = FROM
						value > -6
					}
				}
				ENG = {
					has_opinion = {
						target = FROM
						value > -6
					}
				}
				FRA = {
					has_opinion = {
						target = FROM
						value > -6
					}
				}
				CHI = {
					has_opinion = {
						target = FROM
						value > -6
					}
				}
				GER = {
					has_opinion = {
						target = FROM
						value > -6
					}
				}
				BRA = {
					has_opinion = {
						target = FROM
						value > -6
					}
				}
			}
		}
		days_remove = 90
		days_re_enable = 30
		modifier = {
			monthly_population = 0.05
			population_tax_income_multiplier_modifier = 0.01
		}
		ai_will_do = {
			factor = 1
		}
	}

	NKO_end_of_arduous_march = {
		icon = GFX_decision_generic_scorched_earth
		days_remove = 180
		fire_only_once = yes
		visible = {
			has_completed_focus = NKO_private_markets
			has_completed_focus = NKO_peoples_life_bonds
			has_completed_focus = NKO_industrial_recovery
		}
		available = {
			has_completed_focus = NKO_construction_boom
			has_completed_focus = NKO_nurture_software_industry
			has_completed_focus = NKO_infrastructure_development
			has_completed_focus = NKO_nurture_donju
		}

		remove_effect = {
			remove_dynamic_modifier = {
				modifier = arduous_march_modifiers
			}
			if = {
				limit = { has_completed_focus = NKO_prioritize_to_solve_famine }
				add_timed_idea = {
					idea = NKO_arduous_march_legacy_people
					days = 365
				}
			}
			else_if = {
				limit = { has_completed_focus = NKO_prioritize_songun }
				add_timed_idea = {
					idea = NKO_arduous_march_legacy_songun
					days = 365
				}
			}
		}

		ai_will_do = {
			base = 100
		}
	}
}

NKO_Power_struggle = {
	Kim_Jong_Nam_support = {

		icon = GFX_decision_category_generic_democracy

		cost = 100

		days_remove = 60
		fixed_random_seed = no

		complete_effect = {
			custom_effect_tooltip = NKO_2_5_increase_Kim_Jong_Nam_tt
			hidden_effect = {
				random_list = {
					50 = {
						add_to_variable = {
						 	var = Kim_Jong_Nam
							value = 2
						}
						clamp_variable = {
							var = Kim_Jong_Nam
							min = 0
							max = 100
						}
			 			subtract_from_variable = {
							var = Kim_Jong_un
						  	value = 2
						}
						clamp_variable = {
							var = Kim_Jong_un
						   	min = 0
						   	max = 100
						}
					}
					30 = {
						add_to_variable = {
						 	var = Kim_Jong_Nam
							value = 3
						}
						clamp_variable = {
							var = Kim_Jong_Nam
							min = 0
							max = 100
						}
			 			subtract_from_variable = {
							var = Kim_Jong_un
						  	value = 3
						}
						clamp_variable = {
							var = Kim_Jong_un
						   	min = 0
						   	max = 100
						}
					}
					15 = {
						add_to_variable = {
						 	var = Kim_Jong_Nam
							value = 4
						}
						clamp_variable = {
							var = Kim_Jong_Nam
							min = 0
							max = 100
						}
			 			subtract_from_variable = {
							var = Kim_Jong_un
						  	value = 4
						}
						clamp_variable = {
							var = Kim_Jong_un
						   	min = 0
						   	max = 100
						}
					}
					5 = {
						add_to_variable = {
						 	var = Kim_Jong_Nam
							value = 5
						}
						clamp_variable = {
							var = Kim_Jong_Nam
							min = 0
							max = 100
						}
			 			subtract_from_variable = {
							var = Kim_Jong_un
						  	value = 5
						}
						clamp_variable = {
							var = Kim_Jong_un
						   	min = 0
						   	max = 100
						}
					}
				}
			}
		}
	}

	Kim_Jong_un_support = {

		icon = GFX_decision_category_generic_communism

		cost = 100

		days_remove = 60
		fixed_random_seed = no

		complete_effect = {
			custom_effect_tooltip = NKO_2_5_increase_Kim_Jong_un_tt
			hidden_effect = {
				random_list = {
					50 = {
						add_to_variable = {
						 	var = Kim_Jong_un
							value = 2
						}
						clamp_variable = {
							var = Kim_Jong_un
							min = 0
							max = 100
						}
			 			subtract_from_variable = {
							var = Kim_Jong_Nam
						  	value = 2
						}
						clamp_variable = {
							var = Kim_Jong_Nam
						   	min = 0
						   	max = 100
						}
					}
					30 = {
						add_to_variable = {
						 	var = Kim_Jong_un
							value = 3
						}
						clamp_variable = {
							var = Kim_Jong_un
							min = 0
							max = 100
						}
			 			subtract_from_variable = {
							var = Kim_Jong_Nam
						  	value = 3
						}
						clamp_variable = {
							var = Kim_Jong_Nam
						   	min = 0
						   	max = 100
						}
					}
					15 = {
						add_to_variable = {
						 	var = Kim_Jong_un
							value = 4
						}
						clamp_variable = {
							var = Kim_Jong_un
							min = 0
							max = 100
						}
			 			subtract_from_variable = {
							var = Kim_Jong_Nam
						  	value = 4
						}
						clamp_variable = {
							var = Kim_Jong_Nam
						   	min = 0
						   	max = 100
						}
					}
					5 = {
						add_to_variable = {
						 	var = Kim_Jong_un
							value = 5
						}
						clamp_variable = {
							var = Kim_Jong_un
							min = 0
							max = 100
						}
			 			subtract_from_variable = {
							var = Kim_Jong_Nam
						  	value = 5
						}
						clamp_variable = {
							var = Kim_Jong_Nam
						   	min = 0
						   	max = 100
						}
					}
				}
			}
		}
	}

	Kim_Jong_il_Death = {
		icon = GFX_decision_generic_political_discourse
		allowed = { tag = NKO }
		days_mission_timeout = 60
		fire_only_once = yes
		activation = {
			has_country_flag = Kim_Jong_il_Death_tt
			NOT = {
				OR = {
					has_completed_focus = NKO_Kim_Jong_Nam
					has_completed_focus = NKO_Kim_Jong_un
					has_completed_focus = NKO_Junta
				}
			}
		}
		available = { always = no }
		fixed_random_seed = no
		timeout_effect = {
			if = {
				limit = {
					has_stability > 0.55
					check_variable = {
						var = Kim_Jong_Nam
						value = 75
						compare = greater_than_or_equals
					}
				}
				if = {
					limit = {
						has_completed_focus = NKO_Place_Loyalists_in_KPA
						NOT = { has_completed_focus = NKO_People_Army }
						has_stability < 0.70
					}
					random_list = {
						60 = {
							set_country_flag = Kim_Jong_Nam
							news_event = kim_jong_il_death.4
						}
						40 = {
							set_country_flag = NKO_Junta
							news_event = kim_jong_il_death.6
						}
					}
				}
				else = {
					random_list = {
						85 = {
							set_country_flag = Kim_Jong_Nam
							news_event = kim_jong_il_death.4
						}
						15 = {
							set_country_flag = NKO_Junta
							news_event = kim_jong_il_death.6
						}
					}
				}
			}
			else_if = {
				limit = {
					has_stability > 0.45
					check_variable = {
						var = Kim_Jong_un
						value = 65
						compare = greater_than_or_equals
					}
				}
				if = {
					limit = {
						has_completed_focus = NKO_Bribe_KPA_seniors
						NOT = { has_completed_focus = NKO_People_Army }
						has_stability < 0.75
					}
					random_list = {
						85 = {
							set_country_flag = Kim_Jong_un
							news_event = kim_jong_il_death.5
						}
						15 = {
							set_country_flag = NKO_Junta
							news_event = kim_jong_il_death.6
						}
					}
				}
				else = { set_country_flag = Kim_Jong_un }
			}
			else_if = {
				limit = {
					OR = {
						AND = {
							check_variable = {
								var = Kim_Jong_un
								value = 50
								compare = less_than_or_equals
							}
						}
						AND = {
							check_variable = {
								var = Kim_Jong_Nam
								value = 50
								compare = less_than_or_equals
							}
						}
					}
				}
				set_country_flag = NKO_Junta
				news_event = kim_jong_il_death.6
			}
			else = {
				set_country_flag = NKO_Junta
				news_event = kim_jong_il_death.6
			}
		}
	}
}
